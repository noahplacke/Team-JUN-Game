<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Get the Coins!</title>
    <script src="//cdn.jsdelivr.net/phaser/2.2.2/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body>

    <script type="text/javascript">
        var mascot_raid = {};
        var buttons = {
            main: 0,
            credits: 1,
            save: 2,
            play: 3,
        };
        var background;
        var gameOver;



        //Main menu stage

        mascot_raid.main_menu = function () {};
        mascot_raid.main_menu.prototype = {
            preload: function () {
                game.load.image('main_menu', 'assets/main_menu.png');
                game.load.spritesheet('game_logo', 'assets/game_logo.png', 300, 300);
                game.load.spritesheet('button', 'assets/button_sprite_sheet.png', 100, 100, 4);
                console.log("Main");
            },

            create: function () {

                //main_menu will be main menu
                background = game.add.sprite(0, 0, 'main_menu');
                var logo = game.add.sprite(250, 200, 'game_logo');

                // Buttons
                var play = game.add.button(300, game.world.height / 2, 'button', "", this, 0, 0, 0);
                var credits = game.add.button(450, game.world.height / 2, 'button', "", this, 2, 2, 2);
                play.frame = 0;
                credits.frame = 2;

                play.onInputDown.add(in_game, this);
                credits.onInputDown.add(in_credits, this);


                addKeyListen();
            },

            update: function () {
                //nothing
            }

        };

        //Game stage

        mascot_raid.game_scene_0 = function () {};
        mascot_raid.game_scene_0.prototype = {
            preload: function () {
                game.load.image('main_menu', 'assets/main_menu.png');
                game.load.spritesheet('game_logo', 'assets/game_logo.png', 300, 300);
                game.load.spritesheet('button', 'assets/button_sprite_sheet.png', 100, 100, 4);
                console.log("In game");
            },
            create: function () {
                //add logic here
                background = game.add.sprite(0, 0, 'main_menu');
                var exit = game.add.button(700, 600, 'button', "", this, 1, 1, 1);
                exit.frame = 1;
                exit.onInputDown.add(exit_pressed, this);
                addKeyListen();
            },
            update: function () {
                //add logic here
            }
        };

        //credits Stage

        mascot_raid.credits = function () {};
        mascot_raid.credits.prototype = {
            preload: function () {
                game.load.image('main_menu', 'assets/main_menu.png');
                game.load.spritesheet('game_logo', 'assets/game_logo.png', 300, 300);
                game.load.spritesheet('button', 'assets/button_sprite_sheet.png', 100, 100, 4);
                console.log("credits");
            },
            create: function () {
                //add logic here
                background = game.add.sprite(0, 0, 'main_menu');
                var exit = game.add.button(700, 600, 'button', "", this, 1, 1, 1);
                exit.frame = 1;
                exit.onInputDown.add(exit_pressed, this);
                addKeyListen();
            },
            update: function () {
                //add logic here
            }
        };


        var game = new Phaser.Game(800, 800, Phaser.AUTO);
        game.state.add('main_menu', mascot_raid.main_menu);
        game.state.add('game_scene_0', mascot_raid.game_scene_0);
        game.state.add('credits', mascot_raid.credits);
        game.state.start('main_menu');

        //functions for changing states
        function addKeyListen() {
            game.input.keyboard.addKey(Phaser.Keyboard.R).onDown.add(restart, null, null, null);
        }

        function in_game() {
            change_game_scene_0();
        }

        function in_credits() {
            change_credits();
        }

        function exit_pressed() {
            change_main_menu();
        }

        function restart() {
            console.log("restart");
            game.state.start('main_menu');
        }

        function change_main_menu() {
            game.state.start('main_menu');
        }

        function change_game_scene_0() {
            game.state.start('game_scene_' + 0);
        }

        function change_credits() {
            game.state.start('credits');
        }
    </script>

</body>

</html>